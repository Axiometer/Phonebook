def add_item(phonebook, *, name, number, comment):
    bookitem = {"fullname": "", "number": "", "comment": ""}
    bookitem["fullname"] = name
    bookitem["number"] = number
    bookitem['comment'] = comment
    phonebook.append(bookitem)

def update_item(phonebook, keyword):
    items =[]
    for index, item in enumerate(phonebook):
        if keyword.lower() in item["fullname"].lower():
            print("\Найдено => ФИО: {} | Телефон: {} | Комментарий: {} | Номер записи: {}\n".format(item["fullname"], item["number"], item["comment"], index))
            index_item = phonebook[index]
            phonebook.pop(index)
            while True:
                name = input('Enter updated full name: ')
                if not name.strip():
                    print("\nFullname cannot be empty. Please continue")
                    continue
                number = input('Enter updated Phone Number: ')
                if not number.strip():
                    print("\nPhonenumber cannot be empty. Please continue")
                    continue
                comment = input('Enter updated comment: ')
                if not comment.strip():
                    print("\ncomment cannot be empty. Please continue")
                    continue
                index_item.update({"fullname":name, "number":number, "comment":comment})
                phonebook.insert(index, index_item)
                break
            print("\nUpdated record => Name: {} | PhoneNumber: {} | comment: {} | Index: {}\n".format(
                name, number, comment, index                
                ))
    print("-"*60)

def remove_item(phonebook, keyword):
    for index, item in enumerate(phonebook):
        if keyword.lower() in item["fullname"].lower():
            print("\nFound => Name: {} | PhoneNumber: {} | comment: {} | Index: {}\n".format(
                item["fullname"], item["number"], item["comment"], index
                ))
            sure = input("\nAre you sure, you want to remove this item permanently? [y/yes]: ")
            if not (sure.lower() == "y" or sure.lower() == "yes"):
                 break
            else:
                phonebook.pop(index)
                print("\nThis record has been successfully deleted.")
            
    print("-"*60)   

def add_action(phonebook):
    items = []
    while True:
         fullname = input('Enter full name: ')
         if not fullname.strip():
             print("\nFullname cannot be empty. Please continue")
             continue   
         ph_number = input('Enter Phone Number: ')
         if not ph_number.strip():
             print("\nPhonenumber cannot be empty. Please continue")
             continue
         num_check = is_duplicate_number(phonebook, ph_number)
         if num_check is True:
             continue
         comment = input('Enter comment: ')
         if not comment.strip():
             print("\ncomment cannot be empty. Please continue")
             continue
         comment_check = is_duplicate_comment(phonebook, comment)
         if  comment_check is True:
            continue
         items.append((fullname, ph_number,comment))
         char = input("\nDo you want to continue? [y/yes]: ")
         if not (char.lower() == "y" or char.lower() == "yes"):
                break
    return items
	


def is_duplicate_number(phonebook, ph_number):
    for index, item in enumerate(phonebook):
        if ph_number in item["number"]:
            print("This phone number already exists.")
            return True        

def is_duplicate_comment(phonebook, comment):
    for index, item in enumerate(phonebook):
        if comment in item["comment"]:
            print("This comment already exists.")
            return True    
            #this function should return True if comment is already present in phonebook and return False if comment is not present

A
collected_items = add_action(phonebook)
            for name, number, comment in collected_items:
                add_item(phonebook, name=name, comment=comment, number=number)